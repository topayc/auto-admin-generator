class InputTagGenerator{constructor(e,t,n,s,a){this.tableName=e,this.columnMapList=t,this.mountContainer=n,this.innerContainer=s,this.type=null==a||""==a?"VIEW":a,this.generateTag()}get(){return this.styleHtml}getTodayMidnightString(e){const t=new Date,n=t.getFullYear(),s=(t.getMonth()+1).toString().padStart(2,"0"),a=t.getDate().toString().padStart(2,"0");return 0===e?`${n}-${s}-${a}T12:00`:1===e?`${n}-${s}-${a}`:void 0}setType(e){this.type=e}setMountContainer(e){this.mountContainer=e}setInnerContainer(e){this.innerContainer=e}mount(){if(!this.mountContainer)throw new Error("생성할 dom 을 올릴 컨테이너 선택자가 지정되지 않았습니다. : "+this.mountContainer);const e=document.querySelector(this.mountContainer);if(!e)throw new Error("생성할 dom 을 올릴 컨테이너를 찾을 수 없습니다. : "+this.mountContainer);e.innerHTML="",this.innerContainer?this.generatedDomList.forEach(t=>{if(t instanceof Node){var n=document.createElement("div");n.classList.add(...this.innerContainer.split(" ")),n.setAttribute("style","font-size : 0.8rem"),n.appendChild(t),e.append(n)}}):this.generatedDomList.forEach(t=>e.appendChild(t))}generateTag(){this.generatedDomList=this.columnMapList.map(e=>{let t=e.COLUMN_NAME,n=e.COLUMN_TYPE,s=e.COLUMN_KEY,a=e.COLUMN_COMMENT,o=e.EXTRA;const r=n.indexOf("("),i=r>0?n.substring(0,r):n;if("INT"==i.toUpperCase()||"INTEGER"==i.toUpperCase()||"BIGINT"==i.toUpperCase()||"SMALLINT"==i.toUpperCase()||"TINYINT"==i.toUpperCase()||"MEDIUMINT"==i.toUpperCase()){let e="";if(null!=s&&s.toLowerCase().includes("pri")&&(e="(PK)"),"PRI"==s){const n=document.createElement("div");n.classList.add("form-group");const s=document.createElement("label");s.setAttribute("for",`${this.tableName}_${t}`),s.setAttribute("style","font-size : 0.8rem;"),s.innerHTML=`${t} ${e}`;const a=document.createElement("input");return a.name=`${this.tableName}_${t}`,a.id=`${this.tableName}_${t}`,a.classList.add(..."form-control text-sm form-control-sm".split(" ")),a.placeholder="정수",a.type="number",n.appendChild(s),n.appendChild(a),o.toUpperCase().includes("AUTO")&&"VIEW"!=this.type&&(a.setAttribute("disabled","disabled"),a.placeholder=""),n}{const e=document.createElement("div");if(e.classList.add("form-group"),"update"==this.type||"create"==this.type){const n=document.createElement("label");n.setAttribute("style","font-size : 0.8rem;"),n.innerHTML=`${t}`,n.htmlFor=`${this.tableName}_${t}`;const s=document.createElement("input");s.type="number",s.placeholder="정수",s.name=`${this.tableName}_${t}`,s.id=`${this.tableName}_${t}`,s.classList.add(..."form-control float-right text-sm form-control-sm".split(" ")),e.appendChild(n),e.appendChild(s)}else{const n=document.createElement("label");n.setAttribute("style","font-size : 0.8rem;"),n.innerHTML=`${t}`;const s=document.createElement("div");s.classList.add("input-group");const a=document.createElement("div");a.classList.add("input-group-prepend");const o=document.createElement("input");o.type="number",o.name=`${this.tableName}_${t}_start`,o.id=`${this.tableName}_${t}_start`,o.classList.add(..."form-control float-right text-sm form-control-sm".split(" ")),o.placeholder="정수",o.type="number";const r=document.createTextNode("   -   "),i=document.createElement("input");i.type="number",i.name=`${this.tableName}_${t}_end`,i.id=`${this.tableName}_${t}_end`,i.classList.add(..."form-control float-right text-sm form-control-sm".split(" ")),i.placeholder="정수",i.type="number",s.appendChild(a),s.appendChild(o),s.appendChild(r),s.appendChild(i),e.appendChild(n),e.appendChild(s)}return e}}if("VARCHAR"==i.toUpperCase()||"CHAR"==i.toUpperCase()||"TEXT"==i.toUpperCase()||"SET"==i.toUpperCase()){let e="";null!=s&&s.toLowerCase().includes("pri")&&(e="(PK)");const n=document.createElement("div");n.classList.add("form-group");const o=document.createElement("label");if(o.setAttribute("style","font-size : 0.8rem;"),o.innerHTML=`${t}`,o.setAttribute("for",`${this.tableName}_${t}`),a.toUpperCase().includes("FILE")){o.classList.add("form-label"),o.innerHTML=`${t} `;const e=document.createElement("input");return e.classList.add("form-control"),e.classList.add("form-control-sm"),e.type="file",e.id=`${this.tableName}_${t}`,e.name=`${this.tableName}_${t}`,n.appendChild(o),n.appendChild(e),n}{const e=document.createElement("input");return e.name=`${this.tableName}_${t}`,e.id=`${this.tableName}_${t}`,e.classList.add(..."form-control text-sm form-control-sm".split(" ")),e.placeholder="문자",e.type=a.toUpperCase().includes("PASS")||a.toUpperCase().includes("PASSWORD")?"password":"text",e.placeholder=a.toUpperCase().includes("PASS")||a.toUpperCase().includes("PASSWORD")?"password":"",n.appendChild(o),n.appendChild(e),n}}if("DATETIME"==i.toUpperCase()||"TIMESTAMP"==i.toUpperCase()||"DATE"==i.toUpperCase()||"DATE"==i.toUpperCase()||"TIME"==i.toUpperCase()){if("VIEW"!=this.type)return"";let e,n="";"DATETIME"==i.toUpperCase()||"TIMESTAMP"==i.toUpperCase()?(n="datetime-local",e=this.getTodayMidnightString(0)):"DATE"==i.toUpperCase()?(n="date",e=this.getTodayMidnightString(1)):"TIME"==i.toUpperCase()&&(n="time",e=this.getTodayMidnightString(3),console.log("formatting"),console.log(e));const s=document.createElement("div");s.classList.add("form-group");const a=document.createElement("label");a.setAttribute("style","font-size : 0.8rem;"),a.innerHTML=`${t}`;const o=document.createElement("div");o.classList.add("input-group");const r=document.createElement("div");r.classList.add("input-group-prepend");const l=document.createElement("input");l.type=n,l.name=`${this.tableName}_${t}_start`,l.id=`${this.tableName}_${t}_start`,l.classList.add(..."form-control float-right text-sm form-control-sm".split(" ")),l.value=e;const d=document.createTextNode("   -   "),p=document.createElement("input");return p.type=n,p.name=`${this.tableName}_${t}_end`,p.id=`${this.tableName}_${t}_end`,p.classList.add(..."form-control float-right text-sm form-control-sm".split(" ")),p.value=e,o.appendChild(r),o.appendChild(l),o.appendChild(d),o.appendChild(p),s.appendChild(a),s.appendChild(o),s}if("ENUM"==i.toUpperCase()){const e=n.indexOf("("),s=n.lastIndexOf(")");if(e>0&&s>e){let o=n.substring(e+1,s).replaceAll("'","").split(","),r={};if(o.forEach(e=>r[e]=e),null!=a&&""!=a&&" "!=a){let e=a.split(",");e.forEach(e=>{const t=e.split("=")[0].trim().replace(",",""),n=e.split("=")[1].replace(",","");r.hasOwnProperty(t)&&(r[t]=n)})}const i=document.createElement("div");i.classList.add("form-group");const l=document.createElement("label");l.setAttribute("style","font-size : 0.8rem;"),l.innerHTML=`${t}`;const d=document.createElement("select");d.classList.add(..."form-control text-sm form-control-sm".split(" ")),d.name=`${this.tableName}_${t}`,d.id=`${this.tableName}_${t}`;const p=document.createElement("option");return p.value="",p.innerHTML=`${t} 선택`,d.appendChild(p),Object.entries(r).forEach(([e,t])=>{const n=document.createElement("option");n.value=e,n.innerHTML=t.replace("'",""),d.appendChild(n)}),i.appendChild(l),i.appendChild(d),i}}})}}