class InputTagGenerator{constructor(e,t,n,s,o){this.tableName=e,this.columnMapList=t,this.mountContainer=n,this.innerContainer=s,this.type=null==o||""==o?"VIEW":o,this.generateTag()}get(){return this.styleHtml}getTodayMidnightString(e){const t=new Date,n=t.getFullYear(),s=(t.getMonth()+1).toString().padStart(2,"0"),o=t.getDate().toString().padStart(2,"0");return 0===e?`${n}-${s}-${o}T12:00`:1===e?`${n}-${s}-${o}`:void 0}setType(e){this.type=e}setMountContainer(e){this.mountContainer=e}setInnerContainer(e){this.innerContainer=e}mount(){if(!this.mountContainer)throw new Error("생성할 dom 을 올릴 컨테이너 선택자가 지정되지 않았습니다. : "+this.mountContainer);const e=document.querySelector(this.mountContainer);if(!e)throw new Error("생성할 dom 을 올릴 컨테이너를 찾을 수 없습니다. : "+this.mountContainer);e.innerHTML="",this.innerContainer?this.generatedDomList.forEach(t=>{if(t instanceof Node){var n="col-sm-4 col-md-2 col-12",s=t.querySelector("input"),o="selet";null!=s&&(o=s.getAttribute("type"),"datetime-local"!=o&&"date"!=o&&"time"!=o||(n="col-sm-4 col-md-4 col-12"),"number"==o&&(n="col-sm-4 col-md-1 col-12")),console.log(o);var a=document.createElement("div");a.setAttribute("style","font-size : 0.8rem"),a.classList.add(...n.split(" ")),a.appendChild(t),e.append(a)}}):this.generatedDomList.forEach(t=>e.appendChild(t))}generateTag(){this.generatedDomList=this.columnMapList.map(e=>{let t=e.COLUMN_NAME,n=e.COLUMN_TYPE,s=e.COLUMN_KEY,o=e.COLUMN_COMMENT,a=e.EXTRA;const r=n.indexOf("("),i=r>0?n.substring(0,r):n;if("INT"==i.toUpperCase()||"INTEGER"==i.toUpperCase()||"BIGINT"==i.toUpperCase()||"SMALLINT"==i.toUpperCase()||"TINYINT"==i.toUpperCase()||"MEDIUMINT"==i.toUpperCase()){let e="";null!=s&&s.toLowerCase().includes("pri")&&(e="(PK)");{const n=document.createElement("div");n.classList.add("form-group");const s=document.createElement("label");s.setAttribute("for",`${this.tableName}_${t}`),s.setAttribute("style","font-size : 0.8rem;"),s.innerHTML=`${t} ${e}`;const o=document.createElement("input");return o.name=`${this.tableName}_${t}`,o.id=`${this.tableName}_${t}`,o.classList.add(..."form-control text-sm form-control-sm".split(" ")),o.placeholder="정수",o.type="number",n.appendChild(s),n.appendChild(o),a.toUpperCase().includes("AUTO")&&"VIEW"!=this.type&&(o.setAttribute("disabled","disabled"),o.placeholder=""),n}}if("VARCHAR"==i.toUpperCase()||"CHAR"==i.toUpperCase()||"TEXT"==i.toUpperCase()||"SET"==i.toUpperCase()){let e="";null!=s&&s.toLowerCase().includes("pri")&&(e="(PK)");const n=document.createElement("div");n.classList.add("form-group");const a=document.createElement("label");if(a.setAttribute("style","font-size : 0.8rem;"),a.innerHTML=`${t}`,a.setAttribute("for",`${this.tableName}_${t}`),o.toUpperCase().includes("FILE")){a.classList.add("form-label"),a.innerHTML=`${t} `;const e=document.createElement("input");return e.classList.add("form-control"),e.classList.add("form-control-sm"),e.type="file",e.id=`${this.tableName}_${t}`,e.name=`${this.tableName}_${t}`,n.appendChild(a),n.appendChild(e),n}{const e=document.createElement("input");return e.name=`${this.tableName}_${t}`,e.id=`${this.tableName}_${t}`,e.classList.add(..."form-control text-sm form-control-sm".split(" ")),e.placeholder="문자",e.type=o.toUpperCase().includes("PASS")||o.toUpperCase().includes("PASSWORD")?"password":"text",e.placeholder=o.toUpperCase().includes("PASS")||o.toUpperCase().includes("PASSWORD")?"password":"",n.appendChild(a),n.appendChild(e),n}}if("DATETIME"==i.toUpperCase()||"TIMESTAMP"==i.toUpperCase()||"DATE"==i.toUpperCase()||"DATE"==i.toUpperCase()||"TIME"==i.toUpperCase()){if("VIEW"!=this.type)return"";let e,n="";"DATETIME"==i.toUpperCase()||"TIMESTAMP"==i.toUpperCase()?(n="datetime-local",e=this.getTodayMidnightString(0)):"DATE"==i.toUpperCase()?(n="date",e=this.getTodayMidnightString(1)):"TIME"==i.toUpperCase()&&(n="time",e=this.getTodayMidnightString(3),console.log("formatting"),console.log(e));const s=document.createElement("div");s.classList.add("form-group");const o=document.createElement("label");o.setAttribute("style","font-size : 0.8rem;"),o.innerHTML=`${t}`;const a=document.createElement("div");a.classList.add("input-group");const r=document.createElement("div");r.classList.add("input-group-prepend");const l=document.createElement("input");l.type=n,l.name=`${this.tableName}_${t}_start`,l.id=`${this.tableName}_${t}_start`,l.classList.add(..."form-control float-right text-sm form-control-sm".split(" ")),l.value=e;const d=document.createTextNode("   -   "),p=document.createElement("input");return p.type=n,p.name=`${this.tableName}_${t}_end`,p.id=`${this.tableName}_${t}_end`,p.classList.add(..."form-control float-right text-sm form-control-sm".split(" ")),p.value=e,a.appendChild(r),a.appendChild(l),a.appendChild(d),a.appendChild(p),s.appendChild(o),s.appendChild(a),s}if("ENUM"==i.toUpperCase()){const e=n.indexOf("("),s=n.lastIndexOf(")");if(e>0&&s>e){let a=n.substring(e+1,s).replaceAll("'","").split(","),r={};if(a.forEach(e=>r[e]=e),null!=o&&""!=o&&" "!=o){let e=o.split(",");e.forEach(e=>{const t=e.split("=")[0].trim().replace(",",""),n=e.split("=")[1].replace(",","");r.hasOwnProperty(t)&&(r[t]=n)})}const i=document.createElement("div");i.classList.add("form-group");const l=document.createElement("label");l.setAttribute("style","font-size : 0.8rem;"),l.innerHTML=`${t}`;const d=document.createElement("select");d.classList.add(..."form-control text-sm form-control-sm".split(" ")),d.name=`${this.tableName}_${t}`,d.id=`${this.tableName}_${t}`;const p=document.createElement("option");return p.value="",p.innerHTML=`${t} 선택`,d.appendChild(p),Object.entries(r).forEach(([e,t])=>{const n=document.createElement("option");n.value=e,n.innerHTML=t.replace("'",""),d.appendChild(n)}),i.appendChild(l),i.appendChild(d),i}}})}}